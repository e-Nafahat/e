<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØµØ­Ø­ Ù†ÙØ­Ø§Øª | Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
    <style>
        body { font-family: sans-serif; background: #fdfaf1; text-align: center; padding: 20px; }
        .card { background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 1px solid #e0d5b1; max-width: 400px; margin: auto; }
        #display { font-family: 'Amiri', serif; font-size: 3rem; color: #1a5d1a; min-height: 100px; margin: 20px 0; }
        .matched { color: #2ecc71; font-weight: bold; animation: pop 0.4s ease; }
        @keyframes pop { 0% { transform: scale(0.6); } 100% { transform: scale(1); } }
        .btn { background: #1a5d1a; color: white; border: none; padding: 20px; border-radius: 15px; font-size: 1.3rem; width: 100%; cursor: pointer; font-weight: bold; }
        .status { font-size: 0.8rem; color: #888; margin-top: 15px; }
    </style>
</head>
<body>

<div class="card">
    <h2 style="color: #b8860b;">Ù…Ø®ØªØ¨Ø± Ù†ÙØ­Ø§Øª Ø§Ù„ØµÙˆØªÙŠ</h2>
    <p>Ù‚Ù„ Ø¨ÙˆØ¶ÙˆØ­: <b>(Ù‚Ù„ Ù‡Ùˆ Ø§Ù„Ù„Ù‡ Ø§Ø­Ø¯)</b></p>
    
    <div id="display">Ø£Ù†Ø§ Ø£Ø³Ù…Ø¹Ùƒ..</div>
    
    <button id="btn" class="btn">ğŸ¤ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³Ù…ÙŠØ¹</button>
    <div id="status" class="status">Ø§Ù„Ø­Ø§Ù„Ø©: Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±</div>
</div>

<script>
    const btn = document.getElementById('btn');
    const display = document.getElementById('display');
    const status = document.getElementById('status');
    
    const target = ["Ù‚Ù„", "Ù‡Ùˆ", "Ø§Ù„Ù„Ù‡", "Ø§Ø­Ø¯"];
    let matched = new Set();

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (!SpeechRecognition) {
        status.innerText = "Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ¹Ø±Ù Ø§Ù„ØµÙˆØªÙŠ";
    } else {
        const recognition = new SpeechRecognition();
        recognition.lang = 'ar-SA';
        recognition.interimResults = true;

        btn.onclick = () => {
            matched.clear();
            display.innerHTML = "";
            recognition.start();
        };

        recognition.onstart = () => {
            status.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹... ØªÙƒÙ„Ù… Ø§Ù„Ø¢Ù†";
            btn.style.background = "#e74c3c";
            btn.innerText = "ğŸ›‘ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† ÙŠØ¹Ù…Ù„";
        };

        recognition.onresult = (event) => {
            let transcript = event.results[0][0].transcript;
            let words = transcript.replace(/[^\u0621-\u064A\s]/g, "").split(/\s+/);
            
            words.forEach(w => {
                target.forEach((t, i) => {
                    if (w === t) matched.add(i);
                });
            });

            let html = "";
            target.forEach((t, i) => {
                if (matched.has(i)) html += `<span class="matched">${t}</span> `;
            });
            if(html) display.innerHTML = html;
        };

        recognition.onend = () => {
            status.innerText = "ØªÙˆÙ‚Ù Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹. Ø§Ø¶ØºØ· Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ø¬Ø¯Ø¯Ø§Ù‹";
            btn.style.background = "#1a5d1a";
            btn.innerText = "ğŸ¤ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³Ù…ÙŠØ¹";
        };
    }
</script>

</body>
</html>
