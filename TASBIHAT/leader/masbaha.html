<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ููููุญูุงุชู ุฅููููุงูููููุฉู - ูุณุจุญุฉ ุงูุฐุงูุฑูู</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="masbaha_style.css">
</head>
<body id="main-body" onmousedown="forceVibrationAccess()" ontouchstart="forceVibrationAccess()">

    <button class="info-btn-3d" onclick="toggleModal('guide')">โ ุงูุฅุฑุดุงุฏุงุช</button>
    <div class="user-rank-3d" id="current-rank" oncontextmenu="return false;">ุงูุฑุชุจุฉ: โจ ุฐุงูุฑ</div>

    <div class="modal" id="appModal" onclick="if(event.target == this) closeAllModals()">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title" style="color:var(--gold); font-weight:900;"></h3>
            </div>
            <div class="scrollable-area" id="modal-body"></div>
            <div class="modal-footer">
                <button style="background:var(--maroon); border:none; padding:12px; width:100%; border-radius:15px; font-weight:900; color:white; cursor:pointer;" onclick="closeAllModals()">ุฅุบูุงู ูุงูุนูุฏุฉ</button>
            </div>
        </div>
    </div>

    <div class="tasbih-card">
        <div class="progress-section">
            <div class="progress-label"><span>ุงูุชูุฏู ูุญู ุงูุฑุชุจุฉ ุงูุชุงููุฉ</span><span id="rank-percent">0%</span></div>
            <div class="progress-bar-container"><div id="progress-fill"></div></div>
        </div>
        <div class="session-header">
            <div class="session-title">ุฃูุฏุงู ุงูุฌูุณุงุช</div>
            <div class="session-btns">
                <button class="session-btn active" onclick="setSessionTarget(100)">100</button>
                <button class="session-btn" onclick="setSessionTarget(500)">500</button>
                <button class="session-btn" onclick="setSessionTarget(1000)">1000</button>
            </div>
        </div>
        <div id="active-dhikr" style="color:var(--gold); font-weight:900; font-size:1.1rem; height: 1.5rem;">ุณุจุญุงู ุงููู</div>
        <div class="target-circle-container">
            <svg class="svg-ring" width="160" height="160"><circle class="ring-bg" cx="80" cy="80" r="70"></circle><circle class="ring-fill" id="target-ring" cx="80" cy="80" r="70"></circle></svg>
            <div class="bead-3d" id="main-bead" onpointerdown="doCount()" oncontextmenu="return false;"><div id="counter">0</div></div>
        </div>

        <div class="action-row">
            <div class="fan-wrapper" id="fanWrapper">
                <div class="fan-list">
                    <div class="fan-item" onclick="shareTo('whatsapp')">ูุงุชุณุงุจ</div>
                    <div class="fan-item" onclick="shareTo('telegram')">ุชููุฌุฑุงู</div>
                    <div class="fan-item" onclick="shareTo('twitter')">X</div>
                </div>
                <button class="fan-btn-main" onclick="document.getElementById('fanWrapper').classList.toggle('fan-active')">โจ ุงูุดุฑ ุงูุฎูุฑ</button>
            </div>
            <div class="session-info-box" id="session-display">ูุฏู: 100 / 0</div>
        </div>

        <div class="global-stats-inner">
            <h5>๐ ุฅุฌูุงูู ุชุณุจูุญุงุช ุงูุนุงูู</h5>
            <div class="stat-value-live">
                <div class="live-dot"></div>
                <span id="global-counter-display">0</span>
            </div>
        </div>

        <div class="dhikr-grid">
            <button class="opt-btn" onclick="setDhikr('ุณุจุญุงู ุงููู')">ุณุจุญุงู ุงููู</button>
            <button class="opt-btn" onclick="setDhikr('ุงูุญูุฏ ููู')">ุงูุญูุฏ ููู</button>
            <button class="opt-btn" onclick="setDhikr('ูุง ุงูู ุงูุง ุงููู')">ูุง ุงูู ุงูุง ุงููู</button>
            <button class="opt-btn" onclick="setDhikr('ุงููู ุฃูุจุฑ')">ุงููู ุฃูุจุฑ</button>
            <button class="opt-btn" onclick="setDhikr('ูุง ุญูู ููุง ููู ุงูุง ุจุงููู')">ูุง ุญูู ููุง ููู ุงูุง ุจุงููู</button>
            <button class="opt-btn" onclick="setDhikr('ุณุจุญุงู ุงููู ูุจุญูุฏู')">ุณุจุญุงู ุงููู ูุจุญูุฏู</button>
            <button class="opt-btn" onclick="setDhikr('ุณุจุญุงู ุงููู ุงูุนุธูู')">ุณุจุญุงู ุงููู ุงูุนุธูู</button>
            <button class="opt-btn" onclick="setDhikr('ุงูููู ุตู ุนูู ูุญูุฏ')">ุงูููู ุตู ุนูู ูุญูุฏ</button>
            <button class="opt-btn" style="grid-column: span 2; background:var(--maroon); color:white; border:none;" onclick="resetCount()">ุชุตููุฑ ุงูุนุฏุงุฏ</button>
        </div>
    </div>

    <div class="treasures-section">
        <div class="section-tag">๐ <span>ููุฒ ุงููุณูู ุงูุฌุงูุน</span></div>
        <div class="hisn-main-card" onclick="toggleModal('hisn')">
            <div class="hisn-text">
                <h4>๐ก๏ธ ุญุตู ุงููุณูู ุงููุงูู</h4>
                <p>ุงูุฃุฐูุงุฑุ ุงูุฑููุฉ ุงูุดุฑุนูุฉุ ูุฃุฏุนูุฉ ุงููุชุงุจ ูุงูุณูุฉ</p>
            </div>
            <div class="hisn-badge">ุชุตูุญ ุงูุขู</div>
        </div>
    </div>

    <div class="chat-section" id="chat-section">
        <div class="chat-header-area">
            <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                <div class="live-dot"></div>
                <h2 style="font-size: 1.2rem; color: white; font-weight: 900; text-shadow: 0 2px 5px rgba(0,0,0,0.3);">ููุชูู ุงูุฐุงูุฑูู</h2>
            </div>
        </div>
        <div id="chat-box"></div>
        <div class="chat-inputs">
            <div style="margin-bottom:10px;"><input type="text" id="uName" placeholder="ุงุณูู ุงููุฑูู.." style="width:100%; background:rgba(255,255,255,0.07); border:1px solid rgba(46,204,113,0.3); color:white; padding:10px; border-radius:12px; outline:none;"></div>
            <div style="display: grid; grid-template-columns: 1fr auto; gap: 8px;">
                <textarea id="uMsg" rows="1" placeholder="ุงูุชุจ ุฑุณุงูุฉ ุฅููุงููุฉ.." style="background:rgba(255,255,255,0.07); border:1px solid rgba(46,204,113,0.3); color:white; padding:10px; border-radius:12px; resize:none; outline:none;"></textarea>
                <button class="send-btn" style="background: #2ecc71; border: none; padding: 10px 18px; border-radius: 12px; color: white; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3);" onclick="sendMsg()">๐๏ธ</button>
            </div>
        </div>
    </div>

    <script src="masbaha_script.js"></script>
</body>
</html>
