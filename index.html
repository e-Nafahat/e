<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="google-site-verification" content="xxXB4Y8Tlx1hQQAUzb_KNMtpvvUyPhBt2SfB6yNBpuA" />

    <title>Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© | Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„ØµØ§ÙÙŠ ÙˆØ§Ù„Ø°ÙƒØ± Ø§Ù„Ø­ÙƒÙŠÙ…</title>

    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">

    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ù†ÙØ­Ø§Øª">

    <meta name="description" content="Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© Ù‡ÙŠ Ø¨ÙˆØ§Ø¨ØªÙƒÙ… Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù„Ø¹ÙŠØ´ Ø£Ù†ÙˆØ§Ø± Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù†Ø¨ÙˆÙŠØ© ÙˆØ§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„ØµØ§ÙÙŠ. Ù†Ù‚Ø¯Ù… Ù…Ø­ØªÙˆÙ‰ Ø¥Ø³Ù„Ø§Ù…ÙŠ Ù…ÙˆØ«Ù‚ØŒ Ø¥Ø°Ø§Ø¹Ø© Ù‚Ø±Ø¢Ù† ÙƒØ±ÙŠÙ…ØŒ ÙˆÙ…ÙƒØªØ¨Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ù…Ù†Ù‡Ø¬ Ø£Ù‡Ù„ Ø§Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ø¬Ù…Ø§Ø¹Ø©. Ù†Ø­Ù† Ù†Ø­ÙØ¸ Ù…ÙŠØ±Ø§Ø«Ø§ Ù†Ø¨ÙˆÙŠØ§ ÙŠØ¶ÙŠØ¡ Ø­ÙŠØ§ØªÙƒ.">
    <meta name="keywords" content="Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„ØµØ§ÙÙŠØŒ Ø£Ù‡Ù„ Ø§Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ø¬Ù…Ø§Ø¹Ø©ØŒ Ø£Ø­Ø§Ø¯ÙŠØ« Ù†Ø¨ÙˆÙŠØ©ØŒ Ù…ÙƒØªØ¨Ø© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©ØŒ Ù…ØµØ­Ø­ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©ØŒ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©ØŒ Ø§Ù„Ø®ØªÙ…Ø©ØŒ Ø£Ø°ÙƒØ§Ø±ØŒ ØªØ£Ù…Ù„Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ©ØŒ ÙƒØªØ¨ Ø´Ø±Ø¹ÙŠØ©">
    
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ©">
    <meta property="og:title" content="Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© | Ù…ÙŠØ±Ø§Ø« Ù†Ø¨ÙˆÙŠ ÙŠØ¶ÙŠØ¡ Ø­ÙŠØ§ØªÙƒ">
    <meta property="og:description" content="Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© Ø­ÙŠØ« ÙŠØ·Ù…Ø¦Ù† Ø§Ù„Ù‚Ù„Ø¨ Ø¨Ø§Ù„Ø°ÙƒØ± Ø§Ù„Ø­ÙƒÙŠÙ… ÙˆØ§Ù„Ù†Øµ Ø§Ù„ØµØ­ÙŠØ­. Ù…Ù†Ù‡Ø¬ Ø£Ù‡Ù„ Ø§Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ø¬Ù…Ø§Ø¹Ø©ØŒ Ù…ÙŠØ±Ø§Ø« Ù†Ø¨ÙˆÙŠ ÙŠØ¶ÙŠØ¡ Ø­ÙŠØ§ØªÙƒ ØµÙˆØªØ§ ÙˆÙƒØªØ§Ø¨Ø©.">
    <meta property="og:image" content="https://e-nafahat.github.io/e/favicon.png">
    <meta property="og:url" content="https://e-nafahat.github.io/e/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ©">
    <meta name="twitter:image" content="https://e-nafahat.github.io/e/favicon.png">
    
    <style>
        html, body { 
            background-color: #000000 !important; 
            overscroll-behavior: none; 
            overflow-x: hidden; 
            width: 100%;
            position: fixed; 
            height: 100%;
        }

        body { 
            visibility: hidden; 
            opacity: 0; 
            margin: 0; 
            font-family: 'Cairo', sans-serif; 
            display: block !important; 
            transition: background-color 0.5s ease;
        }

        * {
            -webkit-tap-highlight-color: transparent;
            outline: none !important;
            box-sizing: border-box;
        }

        #main-site-content { 
            display: none; 
            opacity: 0; 
            flex-direction: column; 
            height: 100vh; 
            width: 100vw;
            transition: opacity 1.5s ease; 
            overflow: hidden;
        }

        .magic-nav {
            position: fixed; top: 75px; left: 50%; transform: translateX(-50%) translateY(-20px);
            background: rgba(10, 25, 41, 0.95); backdrop-filter: blur(15px); 
            border: 1px solid rgba(179, 147, 89, 0.5);
            border-radius: 25px; display: flex; flex-direction: column; padding: 10px; gap: 8px; opacity: 0; visibility: hidden;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 10000;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6), inset 0 0 15px rgba(179, 147, 89, 0.1);
        }
        .magic-nav.active { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
        
        .nav-item-magic { 
            color: #fff; font-size: 0.85rem; font-weight: 700; padding: 12px 25px; 
            cursor: pointer; white-space: nowrap; text-align: center;
            border-radius: 15px; background: rgba(255,255,255,0.05);
            border: 1px solid rgba(179, 147, 89, 0.2);
            transition: all 0.2s ease;
        }
        .nav-item-magic:active { 
            transform: scale(0.95); background: #b39359; color: #000; 
            box-shadow: 0 0 15px rgba(179, 147, 89, 0.5);
        }

        .header-3d { 
            display: flex; justify-content: center; perspective: 1000px; 
            width: 100%; z-index: 2000; height: 55px; margin-bottom: 5px;
            background: rgba(0,0,0,0.2); padding: 0 5px;
            flex-shrink: 0;
        }
        .glass-tab {
            flex: 1; border: none; outline: none; cursor: pointer; color: rgba(255,255,255,0.8);
            font-family: 'Cairo'; font-weight: 600; font-size: 0.55rem; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(8px); border-radius: 0 0 15px 15px; display: flex; align-items: center; justify-content: center;
            transform: rotateX(-15deg); margin: 0 2px;
            border-bottom: 2px solid rgba(179, 147, 89, 0.3);
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
        }
        
        .c-1 { background: linear-gradient(to bottom, rgba(0, 90, 80, 0.7), rgba(0, 40, 35, 0.9)); } 
        .c-2 { background: linear-gradient(to bottom, rgba(41, 128, 185, 0.7), rgba(20, 70, 110, 0.9)); } 
        .c-3 { background: linear-gradient(to bottom, rgba(184, 134, 11, 0.7), rgba(100, 70, 0, 0.9)); } 
        .c-mehrab { background: linear-gradient(to bottom, rgba(60, 60, 60, 0.7), rgba(20, 20, 20, 0.9)); } 
        .c-khatma { background: linear-gradient(to bottom, rgba(179, 147, 89, 0.7), rgba(100, 80, 40, 0.9)); } 
        .c-library { background: linear-gradient(to bottom, rgba(101, 67, 33, 0.7), rgba(50, 30, 10, 0.9)); } 
        .c-4 { background: linear-gradient(to bottom, rgba(200, 100, 40, 0.7), rgba(120, 50, 10, 0.9)); }

        .glass-tab.active { 
            height: 65px; transform: rotateX(0deg) translateY(2px); 
            font-weight: 900; z-index: 10; font-size: 0.62rem; color: #fff;
            border-bottom: 3px solid #b39359;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5), 0 0 10px rgba(179, 147, 89, 0.3);
        }

        .main-display { flex-grow: 1; width: 100%; position: relative; padding: 10px; box-sizing: border-box; overflow: hidden; }
        iframe { 
            position: absolute; top: 10px; left: 10px; right: 10px; bottom: 0; width: calc(100% - 20px); height: calc(100% - 10px); 
            border: none; visibility: hidden; opacity: 0; transition: opacity 0.3s ease; border-radius: 20px 20px 0 0; 
            -webkit-overflow-scrolling: touch; 
        }
        iframe.active { visibility: visible; opacity: 1; }
        #intro-holder { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; background: #000; overflow: hidden; }
        
        .seo-hidden-layer {
            position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; 
            overflow: hidden; clip: rect(0,0,0,0); border: 0;
        }

        #update-banner {
            display: none; position: fixed; bottom: 25px; left: 20px; right: 20px; 
            background: linear-gradient(135deg, #d4af37, #b39359); color: #000; 
            padding: 15px; border-radius: 20px; z-index: 10001; text-align: center; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); font-family: 'Cairo', sans-serif;
            border: 1px solid rgba(255,255,255,0.3);
            animation: slideUp 0.5s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .update-btn {
            margin-top: 10px; padding: 8px 25px; border: none; background: #0a2d53; 
            color: #fff; border-radius: 25px; cursor: pointer; font-weight: 700;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: 0.3s;
        }
        .update-btn:active { transform: scale(0.95); }
    </style>
</head>
<body>

    <div class="seo-hidden-layer">
        <h1>Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ©</h1>
        <h2>Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„ØµØ§ÙÙŠ ÙˆØ§Ù„Ø°ÙƒØ± Ø§Ù„Ø­ÙƒÙŠÙ…</h2>
        <p>Ù…ÙˆÙ‚Ø¹ Ù†ÙØ­Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© ÙŠÙ‚Ø¯Ù… Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø¥Ø³Ù„Ø§Ù…ÙŠØ©ØŒ Ù…Ù‚Ø§Ù„Ø§Øª Ø´Ø±Ø¹ÙŠØ©ØŒ Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙƒØªØ¨ØŒ Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©ØŒ ÙˆØªØ£Ù…Ù„Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© Ø¹Ù„Ù‰ Ù…Ù†Ù‡Ø¬ Ø£Ù‡Ù„ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹Ø©.</p>
    </div>

    <div id="intro-holder"></div>

    <div id="update-banner">
        <strong style="display:block; font-size: 1rem;">âœ¨ Ø¨Ø´Ø±Ù‰ Ø³Ø§Ø±Ø©: ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯ Ù…ØªÙˆÙØ±</strong>
        <p style="margin:5px 0; font-size:0.8rem;">ØªÙ… ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ¥Ø¶Ø§ÙØ© Ù„Ù…Ø³Ø§Øª Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ø®ÙÙŠÙØ© Ø¹Ù„Ù‰ Ù‡Ø§ØªÙÙƒ.</p>
        <button class="update-btn" onclick="refreshAppNow()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†</button>
    </div>

    <div class="magic-nav" id="magicNav">
        <div class="nav-item-magic" onclick="closeMagicAndSwitch('home-frame', 0)">ğŸ  Ø§Ù„Ø±Ø¦ÙŠÙ€Ø³ÙŠØ©</div>
        <div class="nav-item-magic" onclick="closeMagicAndSwitch('masbaha-frame', 1)">ğŸ“¿ Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</div>
        <div class="nav-item-magic" onclick="closeMagicAndSwitch('FrontSmart-frame', 2)">ğŸ“œ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</div>
        <div class="nav-item-magic" onclick="closeMagicAndSwitch('mehrab-frame', 3)">ğŸ’ ØªÙØ£ÙÙ…Ù‘ÙÙ„ÙØ§ØªÙŒ</div>
        <div class="nav-item-magic" onclick="closeMagicAndSwitch('khatma-frame', 4)">ğŸ“– Ø§Ù„Ø®ØªÙ…Ø©</div>
        <div class="nav-item-magic" onclick="closeMagicAndSwitch('library-frame', 5)">ğŸ“š Ø§Ù„Ù…ÙƒØªØ¨Ø©</div>
        <div class="nav-item-magic" onclick="closeMagicAndSwitch('more-frame', 6)">âœ¨ Ø£Ø®Ø±Ù‰</div>
    </div>

    <div id="main-site-content">
        <nav class="header-3d">
            <button id="home-btn" class="glass-tab c-1 active" onclick="switchPage('home-frame', this)">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <button id="masbaha-btn" class="glass-tab c-2" onclick="switchPage('masbaha-frame', this)">Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</button>
            <button id="posts-btn" class="glass-tab c-3" onclick="switchPage('FrontSmart-frame', this)">Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</button>
            <button id="mehrab-btn" class="glass-tab c-mehrab" onclick="switchPage('mehrab-frame', this)">ØªØ£Ù…Ù„Ø§Øª</button>
            <button id="khatma-btn" class="glass-tab c-khatma" onclick="switchPage('khatma-frame', this)">Ø§Ù„Ø®ØªÙ…Ø©</button>
            <button id="lib-btn" class="glass-tab c-library" onclick="switchPage('library-frame', this)">Ø§Ù„Ù…ÙƒØªØ¨Ø©</button>
            <button id="more-btn" class="glass-tab c-4" onclick="switchPage('more-frame', this)">Ø£Ø®Ø±Ù‰</button>
        </nav>
        <div class="main-display">
            <iframe id="home-frame" src="leader/home.html" class="active"></iframe>
            <iframe id="masbaha-frame" src="leader/masbaha.html"></iframe>
            <iframe id="FrontSmart-frame" src="leader/FrontSmart.html"></iframe>
            <iframe id="mehrab-frame" src="leader/Mehrab.html?mode=full"></iframe>
            <iframe id="khatma-frame" src="leader/khatma.html"></iframe>
            <iframe id="library-frame" src="Library/library.html"></iframe>
            <iframe id="more-frame" src="leader/more.html"></iframe>
        </div>
    </div>

    <script>
        let newWorker;
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(reg => {
                    reg.addEventListener('updatefound', () => {
                        newWorker = reg.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                document.getElementById('update-banner').style.display = 'block';
                            }
                        });
                    });
                }).catch(err => console.log('SW registration failed', err));
            });
        }

        function refreshAppNow() {
            if (newWorker) {
                newWorker.postMessage({ action: 'skipWaiting' });
            }
            window.location.reload();
        }

        let isAdmin = false;
        // Logic Check: Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„ØµÙˆØª Ù…Ù† Ù…Ø¬Ù„Ø¯ leader
        const globalIntroAudio = new Audio('leader/lindo.mp3');
        globalIntroAudio.preload = 'auto';

        function executeSiteEntry() {
            const holder = document.getElementById('intro-holder');
            const mainContent = document.getElementById('main-site-content');
            mainContent.style.display = 'flex';
            sessionStorage.setItem('hasSeenIntro', 'true');
            setTimeout(() => {
                mainContent.style.opacity = '1';
                document.body.style.backgroundColor = "#F5F5DC";
            }, 100);
            setTimeout(() => { if(holder) holder.remove(); }, 1500);
        }

        window.openPost = function(postId) {
            const postsBtn = document.getElementById('posts-btn');
            const iframe = document.getElementById('FrontSmart-frame');
            switchPage('FrontSmart-frame', postsBtn);
            setTimeout(() => {
                if(iframe.contentWindow) {
                    iframe.contentWindow.postMessage({ type: 'OPEN_SPECIFIC_POST', id: postId }, '*');
                }
            }, 600);
        };

        function switchPage(frameId, btnElement) {
            document.getElementById('magicNav').classList.remove('active');
            document.querySelectorAll('.glass-tab').forEach(b => b.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');
            
            const bgColors = {
                'masbaha-frame': "#000000",
                'library-frame': "#b0b0b0",
                'khatma-frame': "#0f172a",
                'mehrab-frame': "#001226",
                'more-frame': "#FDFBF0",
                'home-frame': "#F5F5DC",
                'FrontSmart-frame': "#F5F5DC"
            };
            
            document.body.style.backgroundColor = bgColors[frameId] || "#F5F5DC";
            
            document.querySelectorAll('iframe').forEach(f => f.classList.remove('active'));
            const target = document.getElementById(frameId);
            if(target) target.classList.add('active');
        }

        window.addEventListener('message', function(event) {
            const data = event.data;
            if (data === 'START_SITE_NOW') executeSiteEntry();
            if (data === 'TOGGLE_MENU') document.getElementById('magicNav').classList.toggle('active');
            if (data === 'PLAY_INTRO_AUDIO') globalIntroAudio.play().catch(e => console.log("Audio play blocked"));
            
            if (data === 'OPEN_MORE_PAGE') {
                switchPage('more-frame', document.getElementById('more-btn'));
            } else if (data === 'GO_HOME') {
                switchPage('home-frame', document.getElementById('home-btn'));
            } else if (data === 'GO_LIBRARY') {
                switchPage('library-frame', document.getElementById('lib-btn'));
            } else if (data === 'GO_KHATMA') {
                switchPage('khatma-frame', document.getElementById('khatma-btn'));
            } else if (data === 'GO_MEHRAB') {
                const mehrabIframe = document.getElementById('mehrab-frame');
                if(!mehrabIframe.src.includes('mode=full')) {
                    mehrabIframe.src = "leader/Mehrab.html?mode=full";
                }
                switchPage('mehrab-frame', document.getElementById('mehrab-btn'));
            }

            if (data && (data.type === 'OPEN_POST' || data.type === 'OPEN_SPECIFIC_POST')) { 
                window.openPost(data.id); 
            }
        });

        document.body.style.visibility = 'visible';
        document.body.style.opacity = '1';

        if (sessionStorage.getItem('hasSeenIntro')) {
            const holder = document.getElementById('intro-holder');
            if(holder) holder.remove();
            const mainContent = document.getElementById('main-site-content');
            mainContent.style.display = 'flex';
            mainContent.style.opacity = '1';
            document.body.style.backgroundColor = "#F5F5DC";
        } else {
            fetch('leader/intro.html')
                .then(res => res.text())
                .then(data => {
                    const holder = document.getElementById('intro-holder');
                    if(holder) {
                        // Logic Check: Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù…Ø³Ø§Ø± Ø§Ù„Ø´Ø¹Ø§Ø± Ù„ÙŠØ¹Ù…Ù„ Ù…Ù† Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯ leader
                        const correctedData = data.replace(/src="LogoNafahat.png"/g, 'src="leader/LogoNafahat.png"');
                        holder.innerHTML = correctedData;
                        
                        const scripts = holder.querySelectorAll('script');
                        scripts.forEach(oldScript => {
                            const newScript = document.createElement('script');
                            newScript.text = oldScript.text;
                            document.head.appendChild(newScript).parentNode.removeChild(newScript);
                        });
                    }
                })
                .catch(err => {
                    executeSiteEntry();
                });
        }

        window.closeMagicAndSwitch = function(frameId, btnIdx) {
            document.getElementById('magicNav').classList.remove('active');
            const tabs = document.querySelectorAll('.glass-tab');
            switchPage(frameId, tabs[btnIdx]);
        }
    </script>
</body>
</html>
